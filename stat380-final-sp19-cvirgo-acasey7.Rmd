---
title: 'Final Project: Guidance Document'
author: "Andrew Casey & Ciara Virgo"
date: "Due April 30, 2019"
output: html_notebook
---

# Purpose

*This document is required to indicate where various requirements can be found within your Final Project Report Rmd.  You must* **indicate line numbers as they appear in your final Rmd document** *accompanying each of the following required tasks. Points will be deducted if line numbers are missing or differ signficantly from the submitted Final Rmd document.*


# Final Project Requirements

### Joins (at least) two different data sources for analysis

*Description: Report includes meaningful contributions from (at least) two different data sources that are JOINED for the analysis*

(A) .Rmd Line number(s) for join operation: 

```{r echo=TRUE, message=FALSE}
# always clean up R environment
rm(list = ls())

# loading packages
library(mdsr)
library(tidyr)
library(data.table)
library(stringr)
library(klaR)

# loading in data
Death_Raw <- fread("NCHS_-_Potentially_Excess_Deaths_from_the_Five_Leading_Causes_of_Death.csv")
Heart_Raw <- fread("Behavioral_Risk_Factor_Data__Tobacco_Use__2010_And_Prior_.csv")
```


### Data Wrangling (5 of 6 required)

*Description: Clear demonstration of proficiency should include proper use of 5 out of the following 6 topics from class: (+) general purpose data wrangling--e.g., filter, select mutate, summarise, arrange, group_by, etc. (+) spread & gather to stack/unstack variables (+) regular expressions (+) user-defined functions (+) loops and control flow (+) vectorized functions like the `apply` family, `purrr::map` or `dplyr::do`*

(A) .Rmd Line number(s) for an example of general purpose data wrangling: 

- DeathData: year, cause of death (heart disease), state, age range
- HeartData: year, location desc, topic type, topic desc, measure desc, sample size, gender, race, age, education

```{r}
DeathData <-
  Death_Raw %>%
  select(Year, `Cause of Death`, State, `Age Range`) %>%
  filter(`Cause of Death` == "Heart Disease") %>%
  filter(State %in% c("Pennsylvania", "Texas", "Washington")) %>%
  filter(Year %in% c(2005, 2006, 2007, 2008, 2009, 2010))

HeartData <-
  Heart_Raw %>%
  select(YEAR, LocationDesc, TopicType, TopicDesc, MeasureDesc, Sample_Size, Gender, Race, Age, Education) %>%
  setnames(old=c("YEAR","LocationDesc", "Age"), new=c("Year", "State", "Age Range")) %>%
  filter(State %in% c("Pennsylvania", "Texas", "Washington")) %>%
  filter(Year %in% c(2005, 2006, 2007, 2008, 2009, 2010))

Rows1 <- HeartData$Gender=="Overall"
HeartData <- HeartData[Rows1,]

Rows2 <- HeartData$`Age Range`=="All Ages"
HeartData <- HeartData[Rows2==FALSE,]

Rows3 <- HeartData$Education=="All Grades"
HeartData <- HeartData[Rows3,]

HeartData <-
  HeartData %>%
  select(-c(7,8,10))

HeartData$Sample_Size <- as.numeric(gsub(",", "", HeartData$Sample_Size))
HeartData$Sample_Size <- as.numeric(as.character(HeartData$Sample_Size))
```

(B) .Rmd Line number(s) for a spread & gather (or equivalent): 

```{r}
Age <- Heart_age$`Age Range`

  if(Age == "18 to 24 Years"){
    
  }
```

(C) .Rmd Line number(s) for use of regular expressions: 
```{r}
CasestoRows <- function(HeartData){
  df <- data.frame()
  for (i in length(HeartData$`Age Range`)){
    for (j in HeartData$Sample_Size[i]){
      df$Year[j] <- HeartData$Year[i]
      df$State[j] <- HeartData$State[i]
      df$TopicType[j] <- HeartData$TopicType[i]
      df$TopicDesc[j] <- HeartData$TopicDesc[i]
      df$MeasureDesc[j] <- HeartData$MeasureDesc[i]
      df$AgeRange[j] <- HeartData$`Age Range`[i]  
    }
  }
  return(df)
}
CasestoRows(HeartData)
```

```{r}
Heart_age <- 
  HeartData %>%
  select(`Age Range`)

head(grep("[18]", Heart_age, value = TRUE))
```

(D) .Rmd Line number(s) for use of user-defined functions: 


(E) .Rmd Line number(s) for use of loops and/or control flow: 


(F) .Rmd Line number(s) for use of vectorized functions: 

- pulling the heartdisease rows from HeartData


### Data Visualization (all 4 required)

*Description: Clear demonstration of proficiency should include at least FOUR distinct and useful data visualizations that are relevant to purpose of the analysis. Include at least one effective visualization with layered data from distinct data structures--e.g., a `geom` that plots data from a secondary data frame AND another must effectively display many--3 or more--variables. All plots must demonstrate good plotting practices.*

(A) .Rmd Line number(s) for visualization with layered data from distinct data structures--e.g., a `geom` that plots data from a secondary data frame: 

```{r}
# x = year, y = # of people with heart disease by tobacco use
```

(B) .Rmd Line number(s) for visualization displaying many--3 or more--variables (A, B, C, & D must be four **different** plots): 

```{r}
# x = year, y = # of people with heart disease by tobacco use ** between all four states
```

(C) .Rmd Line number(s) for a third visualization: 

```{r}
# DeathData: x = Age Range, y = # of heart disease
```

(D) .Rmd Line number(s) for a fourth visualization: 

```{r}
#HeartData: x = year, y = multiple bar chart by state
```


### Data Analysis (3 of 5 required)

*Description: Clear demonstration of proficiency should include proper use of 3 out of the following 4 topics from class: (+) statistical modeling/supervised learning (+) unsupervised learning (+) user-defined simulations (+) analysis of text data (+) R tools for "big data"*

(A) .Rmd Line number(s) for statistical modeling/supervised learning:  
```{r}
#
```

(B) .Rmd Line number(s) for unsupervised learning: 

```{r}
#
kmodes(data = DeathData, modes = 4, iter.max = 10, weighted = FALSE, fast = TRUE)
```

(C) .Rmd Line number(s) for user-defined simulation(s): 


(D) .Rmd Line number(s) for analysis of text data: 


(E) .Rmd Line number(s) for R tools for "big data": 

```{r}
#
```


### Miscelaneous (Nothing for you to report in this Guidance Document)

- *Overall GitHub contributions* will be verified upon the due date using the "contributors" page in your project Repo.  (Nothing to report in Guidance Document)

- *Overall Reproducibility of analysis* will be verified upon the due date by cloning your project Repo and independently executing your analysis

- *Overall STAT 380 for social good* will be verified based on the subject of your final project submission

- *Code quality* will be verified based on alignment to the STAT 380 R style guide

- *Narrative quality* will be evaluated based on the written descriptions of your analysis, motivation, reasoning for each step, and conclusions in the final project report submission

- *Extra credit* will be awarded if the final project report is submitted to Canvas as a URL to a functioning website hosting your analysis (not the URL of the GitHub Repo itself).

